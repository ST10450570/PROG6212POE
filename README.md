# PROG6212POE
For Part 2, I evolved the project from a static visual prototype into a fully functional and secure ASP.NET Core MVC application. My primary focus was on implementing the complete business logic, secure data handling, and distinct role-based workflows as required by the checklist. As specified, I did not use a physical database; instead, I implemented a Singleton service, `InMemoryDataStore.cs`, which holds all users, claims, and documents in simple `List<>` collections to ensure data persists for the application's lifetime. To meet the "No roles/identities" requirement while still enforcing strict separation, I built a custom `UserSessionService.cs`. This service simulates a user login by storing the current user's ID in the session, and I protected every controller action with a helper method, `AuthorizeAndGetUser(UserRole requiredRole)`, to prevent a Lecturer from accessing coordinator pages and vice-versa.

The entire claim submission process is now functional from end to end. The "Create Claim" form is backed by a `ClaimCreateViewModel.cs` that uses data validation attributes like Required, Range, MaxFileSize, and AllowedExtensions to enforce all business rules, such as hour and rate limits. Using JavaScript, the "Total Claim Amount" field also updates automatically in real-time. The file upload control is fully functional, validating the 5MB size limit and restricting file types to `.pdf`, `.docx`, and `.xlsx`. This was a major focus, as I implemented an end-to-end encryption-at-rest system. I built an `IFileEncryptionService` that uses AES encryption. When a lecturer uploads a document, my `ClaimService` encrypts the file stream directly into a `byte[]` array, which is then stored in the `Document` model. Conversely, when any user downloads a document, the `DocumentsController` retrieves this encrypted byte array, decrypts it into a `MemoryStream`, and returns it as a secure `FileResult`.

Finally, I successfully implemented the full two-step approval process with two distinct admin views. The "Coordinator View" is only accessible to coordinators and lists only claims with a "Submitted" status, allowing them to Verify, Return, or Reject. If verified, the claim moves to the "Manager View," which is only accessible to managers and lists only "Verified" claims for final Approval or Rejection. To support this, the UI now provides robust status tracking. I created a partial view, `_StatusLabel.cshtml`, to display color-coded badges for the claim's current state (e.g., Pending, Verified, Approved). Every action in the system, like submitting or approving, provides clear user feedback using `TempData` alerts, and all reviewer actions are handled through pop-up modals to prevent accidental clicks and ensure required information, like a rejection reason, is provided.
